(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,n){},57:function(e,t,n){e.exports=n(88)},62:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(26),i=n.n(s),l=(n(62),n(16)),c=n(17),o=n(20),d=n(18),u=n(21),h=(n(39),function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"header-content"},r.a.createElement("h1",null,"Site Metrics"))}}]),t}(a.Component)),m=n(11),v=n(96),E=n(95),y=n(91),f=n(97),b=n(94),p=n(92),k=n(93),g=n(47),O=n.n(g),j=n(8),w=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(d.a)(t).call(this,e))).state={totalVisits:0,sessionIds:[],metricsById:{},reverseOrder:!1,json:null,username:"",password:"",authMessage:"",data:[],visitWeek:[],visitMonth:[],vWidth:0},n.reverseOrder=n.reverseOrder.bind(Object(m.a)(n)),n.renderEvents=n.renderEvents.bind(Object(m.a)(n)),n.renderMetricsCards=n.renderMetricsCards.bind(Object(m.a)(n)),n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({vWidth:window.innerWidth}),fetch("https://ec2.kevnchoi.com/metric").then(function(e){return e.json()}).then(function(t){e.setState({sessionIds:t,totalVisits:t.length})}).catch(function(e){return console.log("Error: "+e)})}},{key:"fetchMetricsForId",value:function(e){var t=this;e in this.state.metricsById||fetch("https://ec2.kevnchoi.com/metric/"+e).then(function(e){return e.json()}).then(function(n){var a={events:n},r=t.state.metricsById;r[e]=a,t.setState({metricsById:r})}).catch(function(e){return console.log("Error: "+e)})}},{key:"reverseOrder",value:function(){this.setState({sessionIds:this.state.sessionIds.reverse(),reverseOrder:!this.state.reverseOrder})}},{key:"renderReverseButton",value:function(){return this.state.reverseOrder?r.a.createElement("div",null,"\u21a5"):r.a.createElement("div",null,"\u21a7")}},{key:"renderMetricsCards",value:function(){var e=this;return this.state.sessionIds?this.state.sessionIds.map(function(t,n){return r.a.createElement(v.a,{bg:"light",style:{width:"60vw"},key:n},r.a.createElement(v.a.Header,{className:"header",style:{height:"36px",padding:"2px 4px"}},r.a.createElement(E.a.Toggle,{style:{padding:"2px"},as:y.a,variant:"link",eventKey:n.toString(),onClick:function(){return e.fetchMetricsForId(t.session_id)}},O()(t.ts).format("YYYY-MM-DD hh:mm A")),r.a.createElement("div",{className:"time"},t.session_id)),r.a.createElement(E.a.Collapse,{eventKey:n.toString()},r.a.createElement(f.a,null,e.renderEvents(t.session_id))))}):null}},{key:"renderEvents",value:function(e){if(this.state.metricsById[e])return this.state.metricsById[e].events.map(function(e,t){var n=O()(e.ts).format("YYYY-MM-DD hh:mm A"),a=e.event_type.split("="),s="",i="";switch(a[0]){case"sessionStart":s="Started Session";break;case"linkVisit":s="Viewed ";break;case"navTo":s="Navigated to ";break;default:s="Unknown Event"}return a[1]&&(i=a[1]),r.a.createElement(f.a.Item,{key:t},r.a.createElement("p",{className:"event-desc"},s+i,": ",n))})}},{key:"renderChart",value:function(){return this.state.json?r.a.createElement(j.f,{margin:{bottom:60},xType:"ordinal",height:300,width:this.state.vWidth/2},r.a.createElement(j.d,null),r.a.createElement(j.a,null),r.a.createElement(j.g,null),r.a.createElement(j.e,{tickLabelAngle:-50}),r.a.createElement(j.c,{data:this.state.data})):null}},{key:"renderVisitsByMonth",value:function(){return this.state.json?r.a.createElement(j.f,{margin:{bottom:60},xType:"ordinal",height:300,width:this.state.vWidth/2},r.a.createElement(j.d,null),r.a.createElement(j.a,null),r.a.createElement(j.g,null),r.a.createElement(j.e,null),r.a.createElement(j.b,{data:this.state.visitMonth})):null}},{key:"renderVisitsByWeek",value:function(){return this.state.json?r.a.createElement(j.f,{margin:{bottom:60},xType:"ordinal",height:300,width:this.state.vWidth/2},r.a.createElement(j.d,null),r.a.createElement(j.a,null),r.a.createElement(j.g,null),r.a.createElement(j.e,{tickLabelAngle:-50}),r.a.createElement(j.b,{data:this.state.visitWeek})):null}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"body-content"},r.a.createElement(v.a,null,r.a.createElement(v.a.Body,null,r.a.createElement(b.a,{defaultActiveKey:"events"},r.a.createElement(p.a,{eventKey:"events",title:"Events"},r.a.createElement("div",{className:"accordion"},r.a.createElement("h4",{className:"event-header"},r.a.createElement(k.a,{variant:"secondary"},"Total Visits: ",this.state.totalVisits),r.a.createElement("div",{className:"reverse"},r.a.createElement(y.a,{variant:"outline-primary",style:{height:30,width:30,padding:0},onClick:function(){return e.reverseOrder()}},this.renderReverseButton()))),r.a.createElement(E.a,null,this.renderMetricsCards()))),r.a.createElement(p.a,{eventKey:"charts",title:"Charts"},r.a.createElement("div",{className:"charts"},r.a.createElement(v.a.Title,null,"Visits by Event Type"),this.renderChart(),r.a.createElement(v.a.Title,null,"Visits by Month"),this.renderVisitsByMonth(),r.a.createElement(v.a.Title,null,"Visits by Week"),this.renderVisitsByWeek()))))))}}]),t}(a.Component),M=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app-container"},r.a.createElement(h,null),r.a.createElement(w,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[57,1,2]]]);
//# sourceMappingURL=main.42dfbf91.chunk.js.map